{"version":3,"file":"Redraw-ed2990f7.js","sources":["../src/providers/Redraw/Redraw.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport getDisplayName from 'react-display-name'\n\n// Render prop component and HOC for re-rendering.\n// For a discussion on pitfalls, see\n// https://gist.github.com/staltz/08bf613199092eeb41ac8137d51eb5e6\n\nclass Redraw extends React.PureComponent {\n  static propTypes = {\n    interval: PropTypes.number,\n    children: PropTypes.func.isRequired,\n  }\n  static defaultProps = {\n    interval: 1000,\n  }\n  state = {\n    lastDraw: -1,\n  }\n  componentDidMount() {\n    this.raf = null\n    this.draw()\n  }\n  componentWillUnmount() {\n    this.raf && cancelAnimationFrame(this.raf)\n  }\n  draw = () => {\n    this.raf = requestAnimationFrame(this.draw)\n\n    const { interval } = this.props\n    const { lastDraw } = this.state\n    const now = Date.now()\n    const delta = now - lastDraw\n\n    if (lastDraw === -1 || delta > interval) {\n      this.setState({\n        lastDraw: Math.round(now / interval) * interval,\n      })\n    }\n  }\n  render() {\n    return this.props.children()\n  }\n}\n\nconst hocWrap = (Component, interval) => {\n  const HOC = props => (\n    <Redraw interval={interval}>{() => <Component {...props} />}</Redraw>\n  )\n  HOC.displayName = `Redraw(${getDisplayName(Component)})`\n  return HOC\n}\n\nRedraw.hocWrap = hocWrap\n\nexport { Redraw, hocWrap }\nexport default Redraw\n"],"names":["Redraw","React","PureComponent","lastDraw","raf","requestAnimationFrame","draw","interval","props","state","now","Date","delta","setState","Math","round","componentDidMount","componentWillUnmount","cancelAnimationFrame","render","children","PropTypes","number","func","isRequired","hocWrap","Component","HOC","displayName","getDisplayName"],"mappings":";;;;;;;;;;;AAKA;AACA;;AAEA,MAAMA,MAAN,SAAqBC,yBAAK,CAACC,aAA3B,CAAyC;AAAA;AAAA;;AAAA,kDAQ/B;AACNC,MAAAA,QAAQ,EAAE,CAAC;AADL,KAR+B;;AAAA,iDAkBhC,MAAM;AACX,WAAKC,GAAL,GAAWC,qBAAqB,CAAC,KAAKC,IAAN,CAAhC;AAEA,YAAM;AAAEC,QAAAA;AAAF,UAAe,KAAKC,KAA1B;AACA,YAAM;AAAEL,QAAAA;AAAF,UAAe,KAAKM,KAA1B;AACA,YAAMC,GAAG,GAAGC,IAAI,CAACD,GAAL,EAAZ;AACA,YAAME,KAAK,GAAGF,GAAG,GAAGP,QAApB;;AAEA,UAAIA,QAAQ,KAAK,CAAC,CAAd,IAAmBS,KAAK,GAAGL,QAA/B,EAAyC;AACvC,aAAKM,QAAL,CAAc;AACZV,UAAAA,QAAQ,EAAEW,IAAI,CAACC,KAAL,CAAWL,GAAG,GAAGH,QAAjB,IAA6BA;AAD3B,SAAd;AAGD;AACF,KA/BsC;AAAA;;AAWvCS,EAAAA,iBAAiB,GAAG;AAClB,SAAKZ,GAAL,GAAW,IAAX;AACA,SAAKE,IAAL;AACD;;AACDW,EAAAA,oBAAoB,GAAG;AACrB,SAAKb,GAAL,IAAYc,oBAAoB,CAAC,KAAKd,GAAN,CAAhC;AACD;;AAeDe,EAAAA,MAAM,GAAG;AACP,WAAO,KAAKX,KAAL,CAAWY,QAAX,EAAP;AACD;;AAlCsC;;+BAAnCpB,qBACe;AACjBO,EAAAA,QAAQ,EAAEc,eAAS,CAACC,MADH;AAEjBF,EAAAA,QAAQ,EAAEC,eAAS,CAACE,IAAV,CAAeC;AAFR;;+BADfxB,wBAKkB;AACpBO,EAAAA,QAAQ,EAAE;AADU;;AAgCxB,MAAMkB,OAAO,GAAG,CAACC,SAAD,EAAYnB,QAAZ,KAAyB;AACvC,QAAMoB,GAAG,GAAGnB,KAAK,iBACfP,wCAAC,MAAD;AAAQ,IAAA,QAAQ,EAAEM;AAAlB,KAA6B,mBAAMN,wCAAC,SAAD,EAAeO,KAAf,CAAnC,CADF;;AAGAmB,EAAAA,GAAG,CAACC,WAAJ,GAAmB,UAASC,6BAAc,CAACH,SAAD,CAAY,GAAtD;AACA,SAAOC,GAAP;AACD,CAND;;AAQA3B,MAAM,CAACyB,OAAP,GAAiBA,OAAjB;;;;"}