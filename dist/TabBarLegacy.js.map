{"version":3,"file":"TabBarLegacy.js","sources":["../src/components/Tabs/TabBarLegacy.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useTheme } from '../../theme'\nimport { font, unselectable, noop } from '../../utils'\n\nclass TabBar extends React.Component {\n  static propTypes = {\n    items: PropTypes.arrayOf(PropTypes.node).isRequired,\n    selected: PropTypes.number,\n    onChange: PropTypes.func,\n    inAppBar: PropTypes.bool,\n  }\n  static defaultProps = {\n    selected: 0,\n    onChange: noop,\n  }\n\n  state = {\n    displayFocusRing: false,\n  }\n\n  _barRef = React.createRef()\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleKeydown)\n  }\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeydown)\n  }\n\n  enableFocusRing() {\n    this.setState({ displayFocusRing: true })\n  }\n  disableFocusRing() {\n    this.setState({ displayFocusRing: false })\n  }\n  selectElement(element) {\n    const { onChange } = this.props\n    if (!element || !this._barRef.current) {\n      return\n    }\n    const index = [...this._barRef.current.childNodes].indexOf(element)\n    if (index === -1) {\n      return\n    }\n\n    onChange(index)\n  }\n  handleMouseDown = () => {\n    this.disableFocusRing()\n  }\n  handleKeydown = ({ key }) => {\n    if (key === 'Enter') {\n      this.selectElement(document.activeElement)\n      this.enableFocusRing()\n    }\n    if (key === 'Tab') {\n      this.enableFocusRing()\n    }\n  }\n  handleTabMouseDown = ({ currentTarget }) => {\n    // We would usually avoid using the DOM when possible, and prefer using a\n    // separate component (`Tab`) to keep the `index` in a prop, then pass it\n    // using an event prop. But since `this.selectElement()` is needed (so we\n    // can pass `document.activeElement` to it for the keyboard), and we have\n    // `e.currentTarget` in the event object, we might as well use it for the\n    // pointer device too.\n    this.selectElement(currentTarget)\n  }\n  render() {\n    const { displayFocusRing } = this.state\n    const { items, selected, inAppBar } = this.props\n    return (\n      <nav onMouseDown={this.handleMouseDown}>\n        <Bar ref={this._barRef} border={!inAppBar}>\n          {items.map((item, i) => (\n            <Tab\n              key={i}\n              tabIndex=\"0\"\n              selected={i === selected}\n              focusRing={displayFocusRing}\n              onMouseDown={this.handleTabMouseDown}\n            >\n              <Label selected={i === selected}>{item}</Label>\n              {displayFocusRing && <FocusRing />}\n            </Tab>\n          ))}\n        </Bar>\n      </nav>\n    )\n  }\n}\n\n/* eslint-disable react/prop-types */\n\nfunction Bar({ children, border }) {\n  const theme = useTheme()\n  return (\n    <ul\n      css={`\n        display: flex;\n        border-bottom: ${border ? `1px solid ${theme.border}` : '0'};\n      `}\n    >\n      {children}\n    </ul>\n  )\n}\n\nfunction FocusRing({ children }) {\n  const theme = useTheme()\n  return (\n    <span\n      className=\"TabBarLegacy-FocusRing\"\n      css={`\n        display: none;\n        position: absolute;\n        top: -5px;\n        left: -5px;\n        right: -5px;\n        bottom: -5px;\n        border: 2px solid ${theme.accent};\n        border-radius: 2px;\n      `}\n    >\n      {children}\n    </span>\n  )\n}\n\nfunction Tab({ children, selected }) {\n  return (\n    <li\n      css={`\n        position: relative;\n        list-style: none;\n        padding: 0 30px;\n        cursor: pointer;\n        ${font({\n          weight: selected ? 'bold' : 'normal',\n          deprecationNotice: false,\n        })};\n        ${unselectable()};\n        &:focus {\n          outline: 0;\n          .TabBarLegacy-FocusRing {\n            display: block;\n          }\n        }\n      `}\n    >\n      {children}\n    </li>\n  )\n}\n\nfunction Label({ children, selected }) {\n  const theme = useTheme()\n  return (\n    <span\n      css={`\n        display: flex;\n        margin-bottom: -1px;\n        padding: 5px 0 3px;\n        border-bottom: 4px solid ${selected ? theme.accent : 'transparent'};\n      `}\n    >\n      {children}\n    </span>\n  )\n}\n\nexport default TabBar\n"],"names":["TabBar","React","Component","displayFocusRing","createRef","disableFocusRing","key","selectElement","document","activeElement","enableFocusRing","currentTarget","componentDidMount","addEventListener","handleKeydown","componentWillUnmount","removeEventListener","setState","element","onChange","props","_barRef","current","index","childNodes","indexOf","render","state","items","selected","inAppBar","handleMouseDown","map","item","i","handleTabMouseDown","PropTypes","arrayOf","node","isRequired","number","func","bool","noop","Bar","children","border","theme","useTheme","FocusRing","accent","Tab","font","weight","deprecationNotice","unselectable","Label"],"mappings":"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"}