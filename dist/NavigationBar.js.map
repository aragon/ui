{"version":3,"file":"NavigationBar.js","sources":["../src/components/NavigationBar/NavigationBar.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport { Transition, animated } from 'react-spring'\nimport { springs } from '../../style'\nimport LeftIcon from './LeftIcon'\n\nclass NavigationBar extends React.Component {\n  static propTypes = {\n    onBack: PropTypes.func,\n    items: PropTypes.arrayOf(PropTypes.node),\n    compact: PropTypes.bool,\n  }\n  static defaultProps = {\n    onBack: () => {},\n    items: [],\n    compact: false,\n  }\n  state = {\n    cachedItems: null,\n    direction: -1,\n  }\n  static getDerivedStateFromProps(props, state) {\n    const updatedState = { cachedItems: props.items }\n    if (!state.cachedItems) {\n      return updatedState\n    }\n    return {\n      ...updatedState,\n      direction: state.cachedItems.length > props.items.length ? 1 : -1,\n    }\n  }\n  render() {\n    const { onBack, items, compact } = this.props\n    const displayedItems = items\n      .map((node, index) => ({ node, index }))\n      .slice(-1)\n    return (\n      <Container>\n        <Transition\n          items={displayedItems}\n          keys={displayedItems.map(\n            // Use a different key than 0 when there is only one item, so that\n            // the “leave” transition of the first item can be executed when a\n            // second item is added.\n            item => (items.length === 1 ? -1 : item.index)\n          )}\n          config={springs.smooth}\n          initial={null}\n          from={{ opacity: 0, position: this.state.direction * -1 }}\n          enter={{ opacity: 1, position: 0 }}\n          leave={{ opacity: 0, position: this.state.direction }}\n          native\n        >\n          {item => styles => (\n            <Item\n              label={item.node}\n              onBack={onBack}\n              displayBack={item.index > 0}\n              compact={compact}\n              {...styles}\n            />\n          )}\n        </Transition>\n      </Container>\n    )\n  }\n}\n\nconst Item = ({ opacity, position, displayBack, onBack, label, compact }) => (\n  <animated.span\n    style={{\n      display: 'flex',\n      alignItems: 'center',\n      opacity,\n      transform: position.interpolate(p => `translate(${p * 20}px, 0)`),\n    }}\n  >\n    <Title>\n      {displayBack && (\n        <BackButton onClick={onBack} compact={compact}>\n          <LeftIcon />\n        </BackButton>\n      )}\n      <Label>{label}</Label>\n    </Title>\n  </animated.span>\n)\n\nItem.propTypes = {\n  compact: PropTypes.bool,\n  displayBack: PropTypes.bool,\n  label: PropTypes.node,\n  onBack: PropTypes.func,\n  opacity: PropTypes.object,\n  position: PropTypes.object,\n}\n\nconst Container = styled.span`\n  display: flex;\n  position: relative;\n  height: 100%;\n`\n\nconst Title = styled.span`\n  display: flex;\n  align-items: center;\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n`\n\nconst Label = styled.span`\n  display: flex;\n  height: 100%;\n  align-items: center;\n  padding-left: 30px;\n  white-space: nowrap;\n  font-size: 22px;\n`\n\nconst BackButton = styled.span`\n  display: flex;\n  align-items: center;\n  height: 63px;\n  padding: ${p => (p.compact ? '0 16px' : '0 20px 0 30px')};\n  cursor: pointer;\n  svg {\n    color: hsl(179, 76%, 48%);\n  }\n  :active svg {\n    color: hsl(179, 76%, 63%);\n  }\n  & + ${Label} {\n    padding-left: 0;\n  }\n`\n\nexport default NavigationBar\n"],"names":["NavigationBar","React","Component","cachedItems","direction","getDerivedStateFromProps","props","state","updatedState","items","length","render","onBack","compact","displayedItems","map","node","index","slice","Transition","item","springs","smooth","opacity","position","styles","PropTypes","func","arrayOf","bool","Item","displayBack","label","animated","display","alignItems","transform","interpolate","p","LeftIcon","propTypes","object","Container","styled","span","Title","Label","BackButton"],"mappings":"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"}