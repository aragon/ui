{"version":3,"file":"LoadingRing.js","sources":["../../../../../src/components/LoadingRing/LoadingRing.js"],"sourcesContent":["import React, { useMemo, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { keyframes } from 'styled-components'\nimport { useInside } from 'use-inside'\nimport { useTheme } from '../../theme'\n\nconst spin = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n`\n\nconst SIZE_SMALL = 14\nconst SIZE_MEDIUM = 24\n\nconst CONTAINER_SIZE_SMALL = 22\nconst CONTAINER_SIZE_MEDIUM = 24\n\nconst BORDER_WIDTH_STRONG = 2.5\nconst BORDER_WIDTH_MEDIUM = 1\n\nlet lastInstanceId = 1\n\nconst LoadingRing = React.memo(function LoadingRing({\n  paused,\n  mode: modeProp,\n  ...props\n}) {\n  const theme = useTheme()\n  const [instanceId] = useState(() => `sync-indicator-${lastInstanceId++}`)\n  const [insideFloatIndicator] = useInside('FloatIndicator')\n\n  const mode = modeProp || (insideFloatIndicator ? 'half-circle' : 'two-parts')\n\n  const containerSize =\n    mode === 'half-circle' ? CONTAINER_SIZE_MEDIUM : CONTAINER_SIZE_SMALL\n  const borderWidth =\n    mode === 'half-circle' ? BORDER_WIDTH_STRONG : BORDER_WIDTH_MEDIUM\n  const size = (mode === 'half-circle' ? SIZE_MEDIUM : SIZE_SMALL) - borderWidth\n\n  const [gapLength, dashLength] = useMemo(() => {\n    const length = Math.PI * size\n\n    // Both modes display a full circle when paused.\n    if (paused) {\n      return [0, length]\n    }\n\n    if (mode === 'two-parts') {\n      return [length / 4, length / 4]\n    }\n\n    // half-circle\n    return [length / 2, length / 2]\n  }, [mode, size, paused])\n\n  return (\n    <span\n      css={`\n        position: relative;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: ${containerSize}px;\n        height: ${containerSize}px;\n      `}\n      {...props}\n    >\n      <svg\n        width={size + borderWidth}\n        height={size + borderWidth}\n        viewBox={`0 0 ${size + borderWidth} ${size + borderWidth}`}\n      >\n        <linearGradient\n          id={`${instanceId}-gradient`}\n          gradientTransform=\"rotate(90)\"\n        >\n          <stop offset=\"0%\" stopColor={theme.accentEnd} />\n          <stop offset=\"100%\" stopColor={theme.accentStart} />\n        </linearGradient>\n        {insideFloatIndicator && (\n          <circle\n            cx=\"50%\"\n            cy=\"50%\"\n            r={size / 2}\n            fill=\"transparent\"\n            stroke={theme.floatingContent.alpha(0.3)}\n            strokeWidth={borderWidth}\n          />\n        )}\n        <mask id={`${instanceId}-mask`}>\n          <circle\n            cx=\"50%\"\n            cy=\"50%\"\n            r={size / 2}\n            fill=\"transparent\"\n            stroke={`url(#${instanceId}-gradient)`}\n            strokeWidth={borderWidth}\n            strokeDasharray={`${dashLength} ${gapLength}`}\n            css={`\n              animation-duration: 1s;\n              animation-iteration-count: infinite;\n              animation-timing-function: linear;\n              animation-name: ${paused ? 'none' : spin};\n              transform-origin: 50% 50%;\n            `}\n          />\n        </mask>\n        <circle\n          cx=\"50%\"\n          cy=\"50%\"\n          r={size / 2 + borderWidth / 2}\n          fill={`url(#${instanceId}-gradient)`}\n          mask={`url(#${instanceId}-mask)`}\n        />\n      </svg>\n    </span>\n  )\n})\n\nLoadingRing.propTypes = {\n  mode: PropTypes.oneOf(['two-parts', 'half-circle']),\n  paused: PropTypes.bool,\n}\n\nLoadingRing.defaultProps = {\n  paused: false,\n}\n\nexport default LoadingRing\n"],"names":["spin","keyframes","SIZE_SMALL","SIZE_MEDIUM","CONTAINER_SIZE_SMALL","CONTAINER_SIZE_MEDIUM","BORDER_WIDTH_STRONG","BORDER_WIDTH_MEDIUM","lastInstanceId","LoadingRing","React","memo","paused","mode","modeProp","props","theme","useTheme","instanceId","useState","insideFloatIndicator","useInside","containerSize","borderWidth","size","gapLength","dashLength","useMemo","length","Math","PI","accentEnd","accentStart","floatingContent","alpha","propTypes","PropTypes","oneOf","bool","defaultProps"],"mappings":"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"}