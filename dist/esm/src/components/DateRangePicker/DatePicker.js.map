{"version":3,"file":"DatePicker.js","sources":["../../../../../src/components/DateRangePicker/DatePicker.js"],"sourcesContent":["import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport dayjs from 'dayjs'\nimport { GU } from '../../style'\nimport { eachDayOfInterval } from '../../utils'\nimport { Selector } from './components'\nimport MonthDay from './MonthDay'\n\nfunction DatePicker({\n  initialDate,\n  onSelect,\n  datesRangeStart,\n  datesRangeEnd,\n  hideYearSelector,\n  yearFormat,\n  hideMonthSelector,\n  monthFormat,\n  monthYearFormat,\n  hideWeekDays,\n  weekDayFormat,\n  ...props\n}) {\n  const [selectedDate, setSelectedDate] = useState(initialDate)\n\n  const setDate = ({ year, add }) => event => {\n    setSelectedDate(\n      dayjs(selectedDate)\n        .startOf('month')\n        [add ? 'add' : 'subtract'](1, year ? 'year' : 'month')\n        .toDate()\n    )\n  }\n\n  const today = dayjs()\n    .startOf('day')\n    .toDate()\n\n  const selectedDayjs = dayjs(selectedDate || today)\n\n  const isSelected = day => {\n    if (datesRangeStart || datesRangeEnd) {\n      return (\n        day.isSame(datesRangeStart, 'day') || day.isSame(datesRangeEnd, 'day')\n      )\n    }\n    return false\n  }\n\n  const isInRange = day => {\n    if (datesRangeStart && datesRangeEnd) {\n      return day.isAfter(datesRangeStart) && day.isBefore(datesRangeEnd)\n    }\n  }\n\n  return (\n    <div\n      css={`\n        display: grid;\n      `}\n      {...props}\n    >\n      {!hideYearSelector && (\n        <Selector\n          prev={setDate({ year: true, add: false })}\n          next={setDate({ year: true, add: true })}\n          small\n        >\n          {selectedDayjs.format(yearFormat)}\n        </Selector>\n      )}\n\n      {!hideMonthSelector && (\n        <Selector\n          prev={setDate({ year: false, add: false })}\n          next={setDate({ year: false, add: true })}\n        >\n          {selectedDayjs.format(\n            !hideYearSelector ? monthFormat : monthYearFormat\n          )}\n        </Selector>\n      )}\n\n      <div\n        css={`\n          display: grid;\n          grid-template: auto / repeat(7, 1fr);\n          width: ${31.5 * GU}px;\n        `}\n      >\n        {!hideWeekDays &&\n          eachDayOfInterval({\n            start: selectedDayjs.startOf('week'),\n            end: selectedDayjs.endOf('week'),\n          }).map(day => {\n            const dayJs = dayjs(day)\n            return (\n              <MonthDay key={dayJs.format('dd')} weekDay>\n                {dayJs.format(weekDayFormat)}\n              </MonthDay>\n            )\n          })}\n\n        {eachDayOfInterval({\n          start: selectedDayjs.startOf('month').startOf('week'),\n          end: selectedDayjs.endOf('month').endOf('week'),\n        }).map(day => {\n          const dayJs = dayjs(day)\n          return (\n            <MonthDay\n              key={dayJs.valueOf()}\n              disabled={!selectedDayjs.isSame(dayJs, 'month')}\n              selected={isSelected(dayJs)}\n              inRange={isInRange(dayJs)}\n              rangeBoundaryBegin={\n                datesRangeStart &&\n                datesRangeEnd &&\n                dayJs.isSame(datesRangeStart, 'day')\n              }\n              rangeBoundaryEnd={\n                datesRangeStart &&\n                datesRangeEnd &&\n                dayJs.isSame(datesRangeEnd, 'day')\n              }\n              today={dayJs.isSame(today, 'day')}\n              onClick={() => onSelect(dayJs.toDate())}\n            >\n              {dayJs.format(props.dayFormat)}\n            </MonthDay>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\nDatePicker.propTypes = {\n  /**\n   * For displaying a selected dates range - start\n   */\n  datesRangeStart: PropTypes.instanceOf(Date),\n  /**\n   * For displaying a selected dates range - end\n   */\n  datesRangeEnd: PropTypes.instanceOf(Date),\n  /**\n   * Initial date - calendar will start from here.\n   */\n  initialDate: PropTypes.instanceOf(Date),\n\n  // Events\n  onSelect: PropTypes.func,\n\n  // Visibility\n  hideMonthSelector: PropTypes.bool,\n  hideWeekDays: PropTypes.bool,\n  hideYearSelector: PropTypes.bool,\n\n  // Formatting\n  dayFormat: PropTypes.string,\n  monthFormat: PropTypes.string,\n  monthYearFormat: PropTypes.string,\n  weekDayFormat: PropTypes.string,\n  yearFormat: PropTypes.string,\n}\n\nDatePicker.defaultProps = {\n  onSelect: () => {},\n  dayFormat: 'D',\n  monthFormat: 'MMMM',\n  monthYearFormat: 'MMMM YYYY',\n  weekDayFormat: 'ddd',\n  yearFormat: 'YYYY',\n}\n\nexport default DatePicker\n"],"names":["DatePicker","initialDate","onSelect","datesRangeStart","datesRangeEnd","hideYearSelector","yearFormat","hideMonthSelector","monthFormat","monthYearFormat","hideWeekDays","weekDayFormat","props","selectedDate","setSelectedDate","useState","setDate","year","add","event","dayjs","startOf","toDate","today","selectedDayjs","isSelected","day","isSame","isInRange","isAfter","isBefore","format","GU","eachDayOfInterval","start","end","endOf","map","dayJs","MonthDay","valueOf","dayFormat","propTypes","PropTypes","instanceOf","Date","func","bool","string","defaultProps"],"mappings":"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"}