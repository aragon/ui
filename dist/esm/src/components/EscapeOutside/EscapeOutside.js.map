{"version":3,"file":"EscapeOutside.js","sources":["../../../../../src/components/EscapeOutside/EscapeOutside.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { noop, KEY_ESC } from '../../utils'\n\nclass EscapeOutside extends React.Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    onEscapeOutside: PropTypes.func.isRequired,\n    useCapture: PropTypes.bool,\n  }\n\n  static defaultProps = {\n    onEscapeOutside: noop,\n    useCapture: false,\n  }\n\n  _element = React.createRef()\n  _document = null\n\n  componentDidMount() {\n    const { useCapture } = this.props\n    this._document = this._element.ownerDocument\n    this._document.addEventListener('keydown', this.handleEscape, useCapture)\n    this._document.addEventListener('click', this.handleClick, useCapture)\n    this._document.addEventListener('touchend', this.handleClick, useCapture)\n  }\n\n  componentWillUnmount() {\n    const { useCapture } = this.props\n    this._document.removeEventListener('keydown', this.handleEscape, useCapture)\n    this._document.removeEventListener('click', this.handleClick, useCapture)\n    this._document.removeEventListener('touchend', this.handleClick, useCapture)\n  }\n\n  handleClick = e => {\n    const { onEscapeOutside } = this.props\n    if (!this._element.contains(e.target)) {\n      onEscapeOutside()\n    }\n  }\n\n  handleEscape = e => {\n    const { onEscapeOutside } = this.props\n    if (e.keyCode === KEY_ESC) {\n      onEscapeOutside()\n    }\n  }\n\n  render() {\n    const { children, onEscapeOutside, useCapture, ...rest } = this.props\n\n    return (\n      <div {...rest} ref={n => (this._element = n)}>\n        {children}\n      </div>\n    )\n  }\n}\n\nexport default EscapeOutside\n"],"names":["EscapeOutside","React","Component","createRef","e","onEscapeOutside","props","_element","contains","target","keyCode","KEY_ESC","componentDidMount","useCapture","_document","ownerDocument","addEventListener","handleEscape","handleClick","componentWillUnmount","removeEventListener","render","children","rest","n","PropTypes","node","isRequired","func","bool","noop"],"mappings":";;;;;;;AAIA,MAAMA,aAAN,SAA4BC,KAAK,CAACC,SAAlC,CAA4C;AAAA;AAAA;;AAAA,mDAY/BD,KAAK,CAACE,SAAN,EAZ+B;;AAAA,uCAa9B,IAb8B;;AAAA,yCA8B5BC,CAAC,IAAI;AACjB,YAAM;AAAEC,QAAAA;AAAF,UAAsB,KAAKC,KAAjC;;AACA,UAAI,CAAC,KAAKC,QAAL,CAAcC,QAAd,CAAuBJ,CAAC,CAACK,MAAzB,CAAL,EAAuC;AACrCJ,QAAAA,eAAe;AAChB;AACF,KAnCyC;;AAAA,0CAqC3BD,CAAC,IAAI;AAClB,YAAM;AAAEC,QAAAA;AAAF,UAAsB,KAAKC,KAAjC;;AACA,UAAIF,CAAC,CAACM,OAAF,KAAcC,OAAlB,EAA2B;AACzBN,QAAAA,eAAe;AAChB;AACF,KA1CyC;AAAA;;AAe1CO,EAAAA,iBAAiB,GAAG;AAClB,UAAM;AAAEC,MAAAA;AAAF,QAAiB,KAAKP,KAA5B;AACA,SAAKQ,SAAL,GAAiB,KAAKP,QAAL,CAAcQ,aAA/B;;AACA,SAAKD,SAAL,CAAeE,gBAAf,CAAgC,SAAhC,EAA2C,KAAKC,YAAhD,EAA8DJ,UAA9D;;AACA,SAAKC,SAAL,CAAeE,gBAAf,CAAgC,OAAhC,EAAyC,KAAKE,WAA9C,EAA2DL,UAA3D;;AACA,SAAKC,SAAL,CAAeE,gBAAf,CAAgC,UAAhC,EAA4C,KAAKE,WAAjD,EAA8DL,UAA9D;AACD;;AAEDM,EAAAA,oBAAoB,GAAG;AACrB,UAAM;AAAEN,MAAAA;AAAF,QAAiB,KAAKP,KAA5B;;AACA,SAAKQ,SAAL,CAAeM,mBAAf,CAAmC,SAAnC,EAA8C,KAAKH,YAAnD,EAAiEJ,UAAjE;;AACA,SAAKC,SAAL,CAAeM,mBAAf,CAAmC,OAAnC,EAA4C,KAAKF,WAAjD,EAA8DL,UAA9D;;AACA,SAAKC,SAAL,CAAeM,mBAAf,CAAmC,UAAnC,EAA+C,KAAKF,WAApD,EAAiEL,UAAjE;AACD;;AAgBDQ,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEC,MAAAA,QAAF;AAAYjB,MAAAA,eAAZ;AAA6BQ,MAAAA,UAA7B;AAAyC,SAAGU;AAA5C,QAAqD,KAAKjB,KAAhE;AAEA,wBACE,wCAASiB,IAAT;AAAe,MAAA,GAAG,EAAEC,CAAC,IAAK,KAAKjB,QAAL,GAAgBiB;AAA1C,QACGF,QADH,CADF;AAKD;;AApDyC;;gBAAtCtB,4BACe;AACjBsB,EAAAA,QAAQ,EAAEG,SAAS,CAACC,IAAV,CAAeC,UADR;AAEjBtB,EAAAA,eAAe,EAAEoB,SAAS,CAACG,IAAV,CAAeD,UAFf;AAGjBd,EAAAA,UAAU,EAAEY,SAAS,CAACI;AAHL;;gBADf7B,+BAOkB;AACpBK,EAAAA,eAAe,EAAEyB,IADG;AAEpBjB,EAAAA,UAAU,EAAE;AAFQ;;;;"}