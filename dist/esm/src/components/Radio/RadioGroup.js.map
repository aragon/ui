{"version":3,"file":"RadioGroup.js","sources":["../../../../../src/components/Radio/RadioGroup.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { stylingProps, noop } from '../../utils'\n\nconst { Provider, Consumer } = React.createContext({})\n\nclass RadioGroup extends React.PureComponent {\n  static propTypes = {\n    children: PropTypes.node,\n    selected: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    onChange: PropTypes.func,\n  }\n  static defaultProps = {\n    onChange: noop,\n  }\n  state = {\n    // keep track of the radios buttons to handle keyboard navigation\n    radios: new Set(),\n  }\n  handleChange = id => {\n    this.props.onChange(id)\n  }\n  addRadio = id => {\n    this.setState(state => {\n      const radios = new Set(state.radios)\n      radios.add(id)\n      return { radios }\n    })\n  }\n  removeRadio = id => {\n    this.setState(state => {\n      const radios = new Set(state.radios)\n      radios.delete(id)\n      return { radios }\n    })\n  }\n  getSiblingId(position) {\n    const { selected } = this.props\n    const radios = [...this.state.radios]\n    const selectedIndex = selected === undefined ? 0 : radios.indexOf(selected)\n    const newSelectedIndex = selectedIndex + position\n\n    // no radios\n    if (radios.length === 0) {\n      return null\n    }\n\n    // up on the first item: go to the last one\n    if (newSelectedIndex === -1) {\n      return radios[radios.length - 1]\n    }\n\n    // down on the last item: go to the first one\n    if (newSelectedIndex === radios.length) {\n      return radios[0]\n    }\n\n    // select the item item if possible\n    if (selectedIndex > -1 && radios[newSelectedIndex]) {\n      return radios[newSelectedIndex]\n    }\n\n    // default: select the first item if available\n    return radios[0] === undefined ? null : radios[0]\n  }\n  selectPrev = () => {\n    const id = this.getSiblingId(-1)\n    if (id !== null) {\n      this.props.onChange(id)\n    }\n  }\n  selectNext = () => {\n    const id = this.getSiblingId(1)\n    if (id !== null) {\n      this.props.onChange(id)\n    }\n  }\n  render() {\n    const { radios } = this.state\n    const { children, selected } = this.props\n    const focusableId = radios.has(selected) ? selected : [...radios][0]\n    return (\n      <Provider\n        value={{\n          selected,\n          focusableId,\n          onChange: this.handleChange,\n          addRadio: this.addRadio,\n          removeRadio: this.removeRadio,\n          selectPrev: this.selectPrev,\n          selectNext: this.selectNext,\n        }}\n      >\n        <div role=\"radiogroup\" {...stylingProps(this)}>\n          {children}\n        </div>\n      </Provider>\n    )\n  }\n}\n\nexport { Consumer as RadioGroupConsumer }\nexport default RadioGroup\n"],"names":["Provider","Consumer","React","createContext","RadioGroup","PureComponent","radios","Set","id","props","onChange","setState","state","add","delete","getSiblingId","position","selected","selectedIndex","undefined","indexOf","newSelectedIndex","length","render","children","focusableId","has","handleChange","addRadio","removeRadio","selectPrev","selectNext","stylingProps","PropTypes","node","oneOfType","string","number","func","noop"],"mappings":"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"}