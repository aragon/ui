{"version":3,"file":"ButtonBase.js","sources":["../../../../../src/components/ButtonBase/ButtonBase.js"],"sourcesContent":["import React, { useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport FocusVisible from '../FocusVisible/FocusVisible'\nimport { useTheme } from '../../theme'\nimport { RADIUS, textStyle } from '../../style'\nimport { warnOnce, KEY_ENTER, unselectable } from '../../utils'\n\nfunction getElementProps({ element, href, disabled, external }) {\n  // <button> (handles key events)\n  if (element === 'button') {\n    return [\n      'button',\n      {\n        type: 'button',\n        disabled,\n      },\n    ]\n  }\n\n  // <a href=\"\"> (handles key events)\n  if (element === 'a' && href) {\n    return [\n      'anchor',\n      disabled\n        ? {}\n        : {\n            href: href,\n            rel: 'noopener noreferrer',\n            ...(external ? { target: '_blank' } : {}),\n          },\n    ]\n  }\n\n  // <a> or <div> (doesnâ€™t handle key events)\n  return [\n    'basic',\n    {\n      role: 'button',\n      tabIndex: disabled ? '-1' : '0',\n    },\n  ]\n}\n\nfunction ButtonBase({\n  disabled,\n  element,\n  external,\n  focusRingRadius,\n  focusRingSpacing,\n  focusVisible,\n  href,\n  innerRef,\n  onClick,\n  onKeyDown,\n  showFocusRing,\n  ...props\n}) {\n  const theme = useTheme()\n\n  // `external` defaults to `true` if `href` is present, `false` otherwise.\n  if (external === undefined) {\n    external = Boolean(href)\n  }\n\n  if (typeof focusRingSpacing === 'number') {\n    focusRingSpacing = [focusRingSpacing, focusRingSpacing]\n  }\n\n  if (!element) {\n    element = href ? 'a' : 'button'\n  }\n\n  const [elementType, elementProps] = getElementProps({\n    element,\n    href,\n    disabled,\n    external,\n  })\n\n  const handleKeyDown = useCallback(\n    event => {\n      // Only applies to cases where the enter key is not handled already\n      if (elementType === 'basic' && event.keyCode === KEY_ENTER && onClick) {\n        onClick()\n      }\n\n      // Pass the event up\n      if (onKeyDown) {\n        onKeyDown(event)\n      }\n    },\n    [elementType, onClick, onKeyDown]\n  )\n\n  return (\n    <button\n      as={element}\n      ref={innerRef}\n      onClick={disabled ? undefined : onClick}\n      onKeyDown={disabled ? undefined : handleKeyDown}\n      {...elementProps}\n      {...props}\n      css={`\n        position: relative;\n        display: inline-block;\n        padding: 0;\n        white-space: nowrap;\n        ${textStyle('body3')};\n        text-decoration: none;\n        text-align: center;\n        background: none;\n        border-radius: ${RADIUS}px;\n        border: 0;\n        outline: 0;\n        cursor: ${disabled ? 'default' : 'pointer'};\n        ${elementType === 'basic' ? unselectable : ''};\n\n        &::-moz-focus-inner {\n          border: 0;\n        }\n\n        &:focus:after {\n          content: '';\n          display: ${focusVisible && showFocusRing ? 'block' : 'none'};\n          position: absolute;\n          top: ${-focusRingSpacing[1]}px;\n          left: ${-focusRingSpacing[0]}px;\n          right: ${-focusRingSpacing[0]}px;\n          bottom: ${-focusRingSpacing[1]}px;\n          border-radius: ${focusRingRadius}px;\n          border: 2px solid ${theme.focus};\n        }\n      `}\n    />\n  )\n}\n\nButtonBase.propTypes = {\n  disabled: PropTypes.bool,\n  external: PropTypes.bool,\n  focusRingRadius: PropTypes.number,\n  focusRingSpacing: PropTypes.oneOfType([\n    PropTypes.number,\n    PropTypes.arrayOf(PropTypes.number),\n  ]),\n  focusVisible: PropTypes.bool,\n  href: PropTypes.string,\n  innerRef: PropTypes.any,\n  onClick: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  showFocusRing: PropTypes.bool,\n  element: PropTypes.oneOf(['button', 'div', 'a']),\n}\n\nButtonBase.defaultProps = {\n  disabled: false,\n  focusRingRadius: 0,\n  focusRingSpacing: 0,\n  showFocusRing: true,\n}\n\nconst ButtonBaseWithFocus = React.forwardRef(\n  ({ onFocus: onFocusProp, ...props }, ref) => {\n    return (\n      <FocusVisible>\n        {({ focusVisible, onFocus }) => {\n          // support external onFocus handlers\n          const handleFocus = event => {\n            if (onFocusProp) {\n              onFocusProp(event)\n            }\n            onFocus(event)\n          }\n\n          return (\n            <ButtonBase\n              innerRef={ref}\n              onFocus={handleFocus}\n              focusVisible={focusVisible}\n              {...props}\n            />\n          )\n        }}\n      </FocusVisible>\n    )\n  }\n)\n\nButtonBaseWithFocus.propTypes = {\n  ...ButtonBase.propTypes,\n  onFocus: PropTypes.func,\n}\n\nconst LinkBase = React.forwardRef((props, ref) => {\n  warnOnce(\n    'LinkBase',\n    'LinkBase is deprecated: please use ButtonBase with a href prop instead.'\n  )\n  return <ButtonBase ref={ref} {...props} />\n})\n\nexport { LinkBase }\nexport default ButtonBaseWithFocus\n"],"names":["getElementProps","element","href","disabled","external","type","rel","target","role","tabIndex","ButtonBase","focusRingRadius","focusRingSpacing","focusVisible","innerRef","onClick","onKeyDown","showFocusRing","props","theme","useTheme","undefined","Boolean","elementType","elementProps","handleKeyDown","useCallback","event","keyCode","KEY_ENTER","textStyle","unselectable","focus","propTypes","PropTypes","bool","number","oneOfType","arrayOf","string","any","func","oneOf","defaultProps","ButtonBaseWithFocus","React","forwardRef","onFocus","onFocusProp","ref","handleFocus","LinkBase","warnOnce","RADIUS"],"mappings":"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"}