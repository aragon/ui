{"version":3,"file":"DropDown.js","sources":["../../../../../src/components/DropDown/DropDown.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback, useMemo } from 'react'\nimport PropTypes from 'prop-types'\nimport { Inside } from 'use-inside'\nimport { warnOnce, unselectable } from '../../utils'\nimport { GU, RADIUS, textStyle } from '../../style'\nimport { useTheme } from '../../theme'\nimport { IconDown } from '../../icons'\nimport { useViewport } from '../../providers/Viewport/Viewport'\nimport ButtonBase from '../ButtonBase/ButtonBase'\nimport Popover from '../Popover/Popover'\n\nconst MIN_WIDTH = 128\n\nfunction useDropDown({\n  buttonRef,\n  items,\n  displayedLabel,\n  onChange,\n  placeholder,\n  selected,\n}) {\n  const [selectedLabel, setSelectedLabel] = useState(displayedLabel)\n  const [opened, setOpened] = useState(false)\n\n  const close = useCallback(() => {\n    setOpened(false)\n\n    if (buttonRef.current) {\n      buttonRef.current.focus()\n    }\n  }, [buttonRef])\n\n  const toggle = useCallback(() => setOpened(opened => !opened), [])\n\n  const handleItemSelect = useCallback(\n    index => {\n      onChange(index)\n      close()\n    },\n    [onChange, close]\n  )\n\n  useEffect(() => {\n    if (selected === -1 || !items[selected]) {\n      if (displayedLabel) {\n        setSelectedLabel(displayedLabel)\n      }\n      return\n    }\n    setSelectedLabel(items[selected])\n  }, [items, selected, displayedLabel])\n\n  return {\n    handleItemSelect,\n    close,\n    toggle,\n    opened,\n    selectedLabel,\n  }\n}\n\nfunction useButtonRef(cb) {\n  const buttonRef = useRef(null)\n\n  const refCallback = useCallback(\n    el => {\n      if (el) {\n        cb(el)\n      }\n      buttonRef.current = el\n    },\n    [cb]\n  )\n\n  return {\n    buttonRef,\n    refCallback,\n  }\n}\n\nconst DropDown = React.memo(function DropDown({\n  disabled,\n  header,\n  items,\n  onChange,\n  placeholder,\n  renderLabel,\n  selected,\n  wide,\n  width,\n\n  // deprecated\n  active,\n  label,\n\n  // rest\n  ...props\n}) {\n  if (active !== undefined) {\n    warnOnce(\n      'DropDown:active',\n      'The “active” prop is deprecated. Please use “selected” to pass the selected index instead.'\n    )\n  }\n  if (label !== undefined) {\n    warnOnce(\n      'DropDown:label',\n      'DropDown: the “label” prop is deprecated, please use “placeholder” instead.'\n    )\n  }\n\n  const theme = useTheme()\n  const { width: vw } = useViewport()\n\n  const [widthNoPx = MIN_WIDTH] = (width || '').split('px')\n  const [buttonWidth, setButtonWidth] = useState(0)\n  const [measureWidth, setMeasureWidth] = useState(true)\n\n  // Adjust the button width if the item widths are larger than declared width\n  const [placeholderMinWidth, setPlaceholderMinWidth] = useState(\n    Math.min(widthNoPx, MIN_WIDTH)\n  )\n  const popoverRefCallback = useCallback(el => {\n    if (!el) {\n      return\n    }\n    setPlaceholderMinWidth(el.clientWidth)\n    setMeasureWidth(false)\n  }, [])\n  useEffect(() => {\n    setMeasureWidth(true)\n  }, [vw, items])\n\n  // Update the button width every time the reference updates\n  const { refCallback, buttonRef } = useButtonRef(el => {\n    setButtonWidth(el.clientWidth)\n  })\n  // And every time the viewport resizes\n  useEffect(() => {\n    if (!buttonRef.current) {\n      return\n    }\n    setButtonWidth(buttonRef.current.clientWidth)\n  }, [buttonRef, vw])\n\n  const selectedIndex = useMemo(() => {\n    if (selected !== undefined) {\n      return selected\n    }\n    if (active !== undefined) {\n      return active\n    }\n    return -1\n  }, [active, selected])\n\n  const {\n    handleItemSelect,\n    close,\n    toggle,\n    opened,\n    selectedLabel,\n  } = useDropDown({\n    buttonRef,\n    displayedLabel: placeholder || label,\n    items,\n    onChange,\n    selected,\n  })\n\n  const closedWithChanges = !opened && selectedIndex !== -1\n  const Label = renderLabel\n\n  return (\n    <Inside name=\"DropDown\">\n      <ButtonBase\n        ref={refCallback}\n        disabled={disabled}\n        onClick={toggle}\n        focusRingRadius={RADIUS}\n        focusRingSpacing={1}\n        css={`\n          display: ${wide ? 'flex' : 'inline-flex'};\n          justify-content: space-between;\n          align-items: center;\n          height: ${5 * GU}px;\n          padding-left: ${2 * GU}px;\n          padding-right: ${1.5 * GU}px;\n          width: ${width || (wide ? '100%' : 'auto')};\n          min-width: ${wide ? 'auto' : `${placeholderMinWidth}px`};\n          background: ${disabled ? theme.disabled : theme.surface};\n          color: ${disabled ? theme.disabledContent : theme.surfaceContent};\n          border: ${disabled ? 0 : 1}px solid\n            ${closedWithChanges ? theme.selected : theme.border};\n          ${textStyle('body2')};\n          ${disabled\n            ? 'font-weight: 600;'\n            : `\n              &:active {\n                background: ${theme.surfacePressed};\n              }\n            `}\n        `}\n        {...props}\n      >\n        <div css=\"overflow: hidden;\">\n          <Label selectedIndex={selectedIndex} selectedLabel={selectedLabel} />\n        </div>\n        <IconDown\n          size=\"tiny\"\n          css={`\n            margin-left: ${1.5 * GU}px;\n            color: ${disabled\n              ? theme.disabledIcon\n              : closedWithChanges\n              ? theme.accent\n              : theme.surfaceIcon};\n          `}\n        />\n      </ButtonBase>\n      {measureWidth && (\n        <div\n          css={`\n            position: absolute;\n            top: -100vh;\n            left: -100vw;\n            opacity: 0;\n            visibility: hidden;\n          `}\n        >\n          <PopoverContent\n            refCallback={popoverRefCallback}\n            buttonWidth={buttonWidth}\n            header={header}\n            items={items}\n          />\n        </div>\n      )}\n      <Popover onClose={close} opener={buttonRef.current} visible={opened}>\n        <PopoverContent\n          buttonWidth={buttonWidth}\n          header={header}\n          items={items}\n          handleItemSelect={handleItemSelect}\n          selectedIndex={selectedIndex}\n        />\n      </Popover>\n    </Inside>\n  )\n})\n\nDropDown.propTypes = {\n  disabled: PropTypes.bool,\n  header: PropTypes.node,\n  items: PropTypes.arrayOf(PropTypes.node).isRequired,\n  onChange: PropTypes.func.isRequired,\n  placeholder: PropTypes.node,\n  renderLabel: PropTypes.func,\n  selected: PropTypes.number,\n  wide: PropTypes.bool,\n  width: PropTypes.string,\n\n  // deprecated\n  active: PropTypes.number,\n  label: PropTypes.string,\n}\n\nDropDown.defaultProps = {\n  placeholder: 'Select an item',\n  renderLabel: ({ selectedLabel }) => selectedLabel,\n  wide: false,\n}\n\nconst PopoverContent = React.memo(function PopoverContent({\n  refCallback,\n  buttonWidth,\n  header,\n  items,\n  handleItemSelect,\n  selectedIndex,\n}) {\n  const theme = useTheme()\n  return (\n    <div\n      css={`\n        min-width: ${buttonWidth}px;\n        color: ${theme.surfaceContentSecondary};\n      `}\n    >\n      {header && (\n        <div\n          css={`\n            padding: ${1.5 * GU}px ${2 * GU}px ${1.25 * GU}px;\n            ${textStyle('label2')};\n            ${unselectable};\n          `}\n        >\n          {header}\n        </div>\n      )}\n      <ul\n        ref={refCallback}\n        css={`\n          margin: 0;\n          padding: 0;\n          list-style: none;\n          width: 100%;\n        `}\n      >\n        <Inside name=\"DropDown:menu\">\n          {items.map((item, index) => {\n            return (\n              <Item\n                key={index}\n                index={index}\n                onSelect={handleItemSelect}\n                theme={theme}\n                item={item}\n                header={header}\n                length={items.length}\n                selected={selectedIndex}\n              />\n            )\n          })}\n        </Inside>\n      </ul>\n    </div>\n  )\n})\n\nPopoverContent.propTypes = {\n  refCallback: PropTypes.func.isRequired,\n  buttonWidth: PropTypes.number.isRequired,\n  header: PropTypes.node,\n  items: PropTypes.array.isRequired,\n  handleItemSelect: PropTypes.func.isRequired,\n  selectedIndex: PropTypes.number.isRequired,\n}\n\nPopoverContent.defaultProps = {\n  refCallback: () => null,\n  handleItemSelect: () => null,\n  selectedIndex: -1,\n}\n\nconst Item = React.memo(function Item({\n  header,\n  index,\n  item,\n  length,\n  onSelect,\n  selected,\n  theme,\n}) {\n  const handleClick = useCallback(() => {\n    onSelect(index)\n  }, [index, onSelect])\n\n  return (\n    <li>\n      <ButtonBase\n        onClick={handleClick}\n        css={`\n          width: 100%;\n          text-align: left;\n          padding: ${1.25 * GU}px ${2 * GU}px;\n          border-radius: 0;\n          color: ${theme.content};\n\n          ${textStyle('body2')};\n          ${\n            !header && index === 0 ? `border-top-left-radius: ${RADIUS}px;` : ''\n          }\n          ${\n            index === length - 1\n              ? `border-bottom-left-radius: ${RADIUS}px;`\n              : ''\n          }\n          ${\n            selected === index\n              ? `\n              border-left: 2px solid ${theme.accent};\n              background: ${theme.surfaceSelected};\n            `\n              : ''\n          }\n\n          &:active {\n            background: ${theme.surfacePressed};\n          }\n        `}\n      >\n        {item}\n      </ButtonBase>\n    </li>\n  )\n})\n\nItem.propTypes = {\n  header: PropTypes.node,\n  index: PropTypes.number.isRequired,\n  item: PropTypes.node.isRequired,\n  length: PropTypes.number.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  selected: PropTypes.number.isRequired,\n  theme: PropTypes.object.isRequired,\n}\n\nexport default DropDown\n"],"names":["MIN_WIDTH","useDropDown","buttonRef","items","displayedLabel","onChange","placeholder","selected","selectedLabel","setSelectedLabel","useState","opened","setOpened","close","useCallback","current","focus","toggle","handleItemSelect","index","useEffect","useButtonRef","cb","useRef","refCallback","el","DropDown","React","memo","disabled","header","renderLabel","wide","width","active","label","props","undefined","warnOnce","theme","useTheme","vw","useViewport","widthNoPx","split","buttonWidth","setButtonWidth","measureWidth","setMeasureWidth","placeholderMinWidth","setPlaceholderMinWidth","Math","min","popoverRefCallback","clientWidth","selectedIndex","useMemo","closedWithChanges","Label","Inside","RADIUS","GU","surface","disabledContent","surfaceContent","border","textStyle","surfacePressed","disabledIcon","accent","surfaceIcon","propTypes","PropTypes","bool","node","arrayOf","isRequired","func","number","string","defaultProps","PopoverContent","surfaceContentSecondary","map","item","length","array","Item","onSelect","handleClick","content","surfaceSelected","object","unselectable"],"mappings":"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"}