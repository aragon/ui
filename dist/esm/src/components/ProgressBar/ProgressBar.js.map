{"version":3,"file":"ProgressBar.js","sources":["../../../../../src/components/ProgressBar/ProgressBar.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from '../../proptypes'\nimport styled, { keyframes } from 'styled-components'\nimport { useSpring, animated, interpolate } from 'react-spring/hooks'\nimport { springs } from '../../style'\nimport { useTheme } from '../../theme'\nimport { warnOnce } from '../../utils/environment'\n\nconst RADIUS = 2\nconst BAR_HEIGHT = 6\n\nconst INDETERMINATE_WIDTH = 1 / 4\nconst INDETERMINATE_DURATION = 1600\n\nconst indeterminateAnim = keyframes`\n  // x positions use -1px to anticipate any rounding issues\n  0% {\n    transform: translate3d(calc(-100% - 1px), 0, 0);\n  }\n  70%, 100% {\n    transform: translate3d(calc(${100 / INDETERMINATE_WIDTH}% + 1px), 0, 0);\n  }\n`\n\nconst ProgressBar = React.memo(({ animate, color, progress, value }) => {\n  // Support `progress` for a while but warn if being used.\n  if (value === -1 && typeof progress === 'number') {\n    value = progress\n\n    warnOnce(\n      'ProgressBar:progress',\n      'The `progress` prop of ProgressBar is deprecated: please use `value` instead.'\n    )\n  }\n\n  // The indeterminate state can be triggered either by not setting the value\n  // (to mimic the <progress> element in HTML), or by setting the -1 value (for\n  // convenience in React).\n  const indeterminate = value === -1\n\n  const theme = useTheme()\n  const currentColor = color === undefined ? theme.accent : color\n\n  const transition = useSpring({\n    config: { ...springs.smooth, precision: 0.001 },\n    from: { scale: 0, x: 0 },\n    to: { scale: value, x: 0 },\n    immediate: !animate,\n  })\n\n  return (\n    <div\n      css={`\n        width: 100%;\n        height: ${BAR_HEIGHT}px;\n        background: ${theme.surfaceUnder};\n        border-radius: ${RADIUS}px;\n        overflow: hidden;\n      `}\n    >\n      <Bar\n        style={{\n          width: `${(indeterminate ? INDETERMINATE_WIDTH : 1) * 100}%`,\n          background: currentColor,\n          borderRadius: `${indeterminate ? RADIUS : 0}px`,\n          animationName: `${indeterminate ? indeterminateAnim.name : 'none'}`,\n          transform: interpolate(\n            [transition.x, transition.scale],\n            (x, s) => `translate3d(${x * 100}%, 0, 0) scale3d(${s}, 1, 1)`\n          ),\n        }}\n      />\n    </div>\n  )\n})\n\nconst Bar = styled(animated.div)`\n  width: 100%;\n  height: ${BAR_HEIGHT}px;\n  transform-origin: 0 0;\n\n  // this need to be defined here rather than as a style property, so that\n  // styled can inject the @keyframes (on demand since styled@v4).\n  animation: ${indeterminateAnim} ${INDETERMINATE_DURATION}ms ease-in-out\n    infinite;\n  animation-name: none;\n`\n\nProgressBar.defaultProps = {\n  animate: true,\n  value: -1,\n}\n\nProgressBar.propTypes = {\n  animate: PropTypes.bool,\n  color: PropTypes.string,\n  progress: PropTypes._0to1,\n  value: PropTypes.oneOfType([PropTypes._0to1, PropTypes.oneOf([-1])]),\n}\n\nexport default ProgressBar\n"],"names":["RADIUS","BAR_HEIGHT","INDETERMINATE_WIDTH","INDETERMINATE_DURATION","indeterminateAnim","keyframes","ProgressBar","React","memo","animate","color","progress","value","warnOnce","indeterminate","theme","useTheme","currentColor","undefined","accent","transition","useSpring","config","springs","smooth","precision","from","scale","x","to","immediate","surfaceUnder","width","background","borderRadius","animationName","name","transform","interpolate","s","Bar","styled","animated","div","defaultProps","propTypes","PropTypes","bool","string","_0to1","oneOfType","oneOf"],"mappings":"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"}