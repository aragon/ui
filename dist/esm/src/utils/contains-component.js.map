{"version":3,"file":"contains-component.js","sources":["../../../../src/utils/contains-component.js"],"sourcesContent":["import React, { useContext, useEffect, useMemo, useState } from 'react'\n\nfunction initContainsComponent() {\n  const ContainsContext = React.createContext({ contains: false })\n\n  return {\n    // Wrap the parent component with this provider.\n    /* eslint-disable react/prop-types */\n    Provider({ children }) {\n      const [count, setCount] = useState(0)\n\n      const contextValue = useMemo(() => {\n        return {\n          updateCount(diff) {\n            setCount(count => count + diff)\n          },\n          contains: count > 0,\n        }\n      }, [count])\n\n      return (\n        <ContainsContext.Provider value={contextValue}>\n          {children}\n        </ContainsContext.Provider>\n      )\n    },\n    /* eslint-enable react/prop-types */\n\n    // Call this from the parent component (returns a boolean)\n    useContains() {\n      return useContext(ContainsContext).contains\n    },\n\n    // Call this from the child component\n    useRegister() {\n      const { updateCount } = useContext(ContainsContext)\n\n      useEffect(() => {\n        if (!updateCount) {\n          return\n        }\n        updateCount(1)\n        return () => {\n          updateCount(-1)\n        }\n        // We don't want this effect to ever re-run\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n      }, [])\n    },\n  }\n}\n\nexport { initContainsComponent }\n"],"names":["initContainsComponent","ContainsContext","React","createContext","contains","Provider","children","count","setCount","useState","contextValue","useMemo","updateCount","diff","useContains","useContext","useRegister","useEffect"],"mappings":";;AAEA,SAASA,qBAAT,GAAiC;AAC/B,QAAMC,eAAe,gBAAGC,KAAK,CAACC,aAAN,CAAoB;AAAEC,IAAAA,QAAQ,EAAE;AAAZ,GAApB,CAAxB;AAEA,SAAO;AACL;;AACA;AACAC,IAAAA,QAAQ,CAAC;AAAEC,MAAAA;AAAF,KAAD,EAAe;AACrB,YAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBC,QAAQ,CAAC,CAAD,CAAlC;AAEA,YAAMC,YAAY,GAAGC,OAAO,CAAC,MAAM;AACjC,eAAO;AACLC,UAAAA,WAAW,CAACC,IAAD,EAAO;AAChBL,YAAAA,QAAQ,CAACD,KAAK,IAAIA,KAAK,GAAGM,IAAlB,CAAR;AACD,WAHI;;AAILT,UAAAA,QAAQ,EAAEG,KAAK,GAAG;AAJb,SAAP;AAMD,OAP2B,EAOzB,CAACA,KAAD,CAPyB,CAA5B;AASA,0BACE,oBAAC,eAAD,CAAiB,QAAjB;AAA0B,QAAA,KAAK,EAAEG;AAAjC,SACGJ,QADH,CADF;AAKD,KApBI;;AAqBL;AAEA;AACAQ,IAAAA,WAAW,GAAG;AACZ,aAAOC,UAAU,CAACd,eAAD,CAAV,CAA4BG,QAAnC;AACD,KA1BI;;AA4BL;AACAY,IAAAA,WAAW,GAAG;AACZ,YAAM;AAAEJ,QAAAA;AAAF,UAAkBG,UAAU,CAACd,eAAD,CAAlC;AAEAgB,MAAAA,SAAS,CAAC,MAAM;AACd,YAAI,CAACL,WAAL,EAAkB;AAChB;AACD;;AACDA,QAAAA,WAAW,CAAC,CAAD,CAAX;AACA,eAAO,MAAM;AACXA,UAAAA,WAAW,CAAC,CAAC,CAAF,CAAX;AACD,SAFD,CALc;AASd;AACD,OAVQ,EAUN,EAVM,CAAT;AAWD;;AA3CI,GAAP;AA6CD;;;;"}