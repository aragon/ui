{"version":3,"file":"EscapeOutside.js","sources":["../src/components/EscapeOutside/EscapeOutside.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { noop, KEY_ESC } from '../../utils'\n\nclass EscapeOutside extends React.Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    onEscapeOutside: PropTypes.func.isRequired,\n    useCapture: PropTypes.bool,\n  }\n\n  static defaultProps = {\n    onEscapeOutside: noop,\n    useCapture: false,\n  }\n\n  _element = React.createRef()\n  _document = null\n\n  componentDidMount() {\n    const { useCapture } = this.props\n    this._document = this._element.ownerDocument\n    this._document.addEventListener('keydown', this.handleEscape, useCapture)\n    this._document.addEventListener('click', this.handleClick, useCapture)\n    this._document.addEventListener('touchend', this.handleClick, useCapture)\n  }\n\n  componentWillUnmount() {\n    const { useCapture } = this.props\n    this._document.removeEventListener('keydown', this.handleEscape, useCapture)\n    this._document.removeEventListener('click', this.handleClick, useCapture)\n    this._document.removeEventListener('touchend', this.handleClick, useCapture)\n  }\n\n  handleClick = e => {\n    const { onEscapeOutside } = this.props\n    if (!this._element.contains(e.target)) {\n      onEscapeOutside()\n    }\n  }\n\n  handleEscape = e => {\n    const { onEscapeOutside } = this.props\n    if (e.keyCode === KEY_ESC) {\n      onEscapeOutside()\n    }\n  }\n\n  render() {\n    const { children, onEscapeOutside, useCapture, ...rest } = this.props\n\n    return (\n      <div {...rest} ref={n => (this._element = n)}>\n        {children}\n      </div>\n    )\n  }\n}\n\nexport default EscapeOutside\n"],"names":["EscapeOutside","React","createRef","e","onEscapeOutside","props","_element","contains","target","keyCode","KEY_ESC","useCapture","_document","ownerDocument","addEventListener","handleEscape","handleClick","removeEventListener","children","rest","n","Component","PropTypes","node","isRequired","func","bool","noop"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAIMA;;;;;;;;;;;;;;;;+FAYOC,cAAK,CAACC,SAAN;;gGACC;;kGAiBE,UAAAC,CAAC,EAAI;AAAA,UACTC,eADS,GACW,MAAKC,KADhB,CACTD,eADS;;AAEjB,UAAI,CAAC,MAAKE,QAAL,CAAcC,QAAd,CAAuBJ,CAAC,CAACK,MAAzB,CAAL,EAAuC;AACrCJ,QAAAA,eAAe;AAChB;AACF;;mGAEc,UAAAD,CAAC,EAAI;AAAA,UACVC,eADU,GACU,MAAKC,KADf,CACVD,eADU;;AAElB,UAAID,CAAC,CAACM,OAAF,KAAcC,gBAAlB,EAA2B;AACzBN,QAAAA,eAAe;AAChB;AACF;;;;;;;wCA3BmB;AAAA,UACVO,UADU,GACK,KAAKN,KADV,CACVM,UADU;AAElB,WAAKC,SAAL,GAAiB,KAAKN,QAAL,CAAcO,aAA/B;;AACA,WAAKD,SAAL,CAAeE,gBAAf,CAAgC,SAAhC,EAA2C,KAAKC,YAAhD,EAA8DJ,UAA9D;;AACA,WAAKC,SAAL,CAAeE,gBAAf,CAAgC,OAAhC,EAAyC,KAAKE,WAA9C,EAA2DL,UAA3D;;AACA,WAAKC,SAAL,CAAeE,gBAAf,CAAgC,UAAhC,EAA4C,KAAKE,WAAjD,EAA8DL,UAA9D;AACD;;;2CAEsB;AAAA,UACbA,UADa,GACE,KAAKN,KADP,CACbM,UADa;;AAErB,WAAKC,SAAL,CAAeK,mBAAf,CAAmC,SAAnC,EAA8C,KAAKF,YAAnD,EAAiEJ,UAAjE;;AACA,WAAKC,SAAL,CAAeK,mBAAf,CAAmC,OAAnC,EAA4C,KAAKD,WAAjD,EAA8DL,UAA9D;;AACA,WAAKC,SAAL,CAAeK,mBAAf,CAAmC,UAAnC,EAA+C,KAAKD,WAApD,EAAiEL,UAAjE;AACD;;;6BAgBQ;AAAA;;AAAA,wBACoD,KAAKN,KADzD;AAAA,UACCa,QADD,eACCA,QADD;AAAA,UACWd,eADX,eACWA,eADX;AAAA,UAC4BO,UAD5B,eAC4BA,UAD5B;AAAA,UAC2CQ,IAD3C;;AAGP,0BACElB,4DAASkB,IAAT;AAAe,QAAA,GAAG,EAAE,aAAAC,CAAC;AAAA,iBAAK,MAAI,CAACd,QAAL,GAAgBc,CAArB;AAAA;AAArB,UACGF,QADH,CADF;AAKD;;;;EApDyBjB,cAAK,CAACoB;;iCAA5BrB,4BACe;AACjBkB,EAAAA,QAAQ,EAAEI,eAAS,CAACC,IAAV,CAAeC,UADR;AAEjBpB,EAAAA,eAAe,EAAEkB,eAAS,CAACG,IAAV,CAAeD,UAFf;AAGjBb,EAAAA,UAAU,EAAEW,eAAS,CAACI;AAHL;;iCADf1B,+BAOkB;AACpBI,EAAAA,eAAe,EAAEuB,kBADG;AAEpBhB,EAAAA,UAAU,EAAE;AAFQ;;;;"}